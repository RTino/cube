<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Cube App, Import, manage and export collections of things. NodeJS + BackboneJS app ">
    <meta name="keywords" content="Data managemet, CubeApp, Cube App, Zalando, WebApp, Nodejs, Node, Backbone, Backbonejs, Solr, CRUD, data management tool">
    <meta name="author" content="Emanuel Lauria Izundegui">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <title>Cube â€“ Import, manage and export collections of things.</title>
    <link rel="canonical" href="http://cubeapp.io">
    <link rel="icon" href="favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="template/templatescripts.js"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-40533395-3', 'cubeapp.io');
        ga('send', 'pageview');
    </script>
</head>

<body>
    <div id="wrapper">
        <div id="menu-wrapper"></div>

        <div id="page">

            <section id="importing" class="inner">
                <h3>Importing external data to a Cube.</h3>
                <p>
                    The Cube comes with an Importer Framework which you can use to create your own data
                    importers. It has built-in importers for JSON, CSV and XML external data.
                </p>
                <p>
                    The ImportManager is responsible for reading import.json files on the entities directory
                    and scheduling these importers to run at the specified intervals.
                </p>
                <h6>The import.json file</h6>
                <p>
                    Importer jobs are defined inside a <strong>import.json</strong> file, located under the
                    desired Cube entity folder. So for example if you want to import data to the
                    "My Test Cube", create that file on /entities/mytestcube/import.json. Each cube entity
                    can have multiple importers, running on different schedules and having different properties.
                </p>
                <p>
                    <strong>Main properties:</strong>
                </p>
                <table>
                    <thead>
                        <tr>
                            <th>key</th>
                            <th class="optional">type</th>
                            <th class="optional">default</th>
                            <th>description</th>
                        </tr>
                    </thead>
                    <tr>
                        <td>continueOnError</td>
                        <td>Boolean</td>
                        <td>false</td>
                        <td>
                            If true the importer won't stop when errors are encountered. Otherwise it will stop
                            and jump to the onFinish() of that specific importer.
                        </td>
                    </tr>
                    <tr>
                        <td>disabled</td>
                        <td>Boolean</td>
                        <td>false</td>
                        <td>
                            If disabled is true, the importer won't run. Useful to temporarily disable importers.
                        </td>
                    </tr>
                    <tr>
                        <td>fields</td>
                        <td>Object (target:source)</td>
                        <td></td>
                        <td>
                            If specified, the fields object maps data from the source data to the target destination,
                            using "targetNameField: sourceNameFieldOrIndex". For example to map the "fullname" from the
                            external JSON to the "name" field on Cube, and get "id" value from the first property of
                            the external JSON.
<code>
"fields": {
    "name": "fullname",
    "id": 0
}</code>
                        </td>
                    </tr>
                    <tr>
                        <td>id</td>
                        <td>String</td>
                        <td></td>
                        <td>Identification or description, alphanumerical only.</td>
                    </tr>
                    <tr>
                        <td>mode</td>
                        <td>String</td>
                        <td>full</td>
                        <td>
                            <ul class="tablelist">
                                <li><strong>full</strong> wipe current data and add results.</li>
                                <li><strong>update</strong> add new and update existing results.
                                    This can be used in conjunction with the "updateKey" property to
                                    identify which items needs updating.</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td>runOnStart</td>
                        <td>Boolean</td>
                        <td>false</td>
                        <td>If true the importer will run when the Node.js app starts.</td>
                    </tr>
                    <tr>
                        <td>schedule</td>
                        <td>Integer or Array</td>
                        <td></td>
                        <td>
                            Integer: interval in seconds<br />
                            Array: times using the hh:mm:ss format
                        </td>
                    </tr>
                    <tr>
                        <td>type</td>
                        <td>String</td>
                        <td>json</td>
                        <td>
                            The type of importer is the prefix of the importer coffee file.<br />
                            jsonImporter.coffee type is "json"<br />
                            csvImporter.coffee type is "csv"<br />
                            mySqlImporter.coffee type is "mySql"
                        </td>
                    </tr>
                    <tr>
                        <td>uri</td>
                        <td>String</td>
                        <td></td>
                        <td>URL or local file path.</td>
                    </tr>
                </table>
                <p>
                    <strong>Extra properties:</strong>
                </p>
                <table>
                    <thead>
                        <tr>
                            <th>key</th>
                            <th class="optional">type</th>
                            <th class="optional">default</th>
                            <th>description</th>
                        </tr>
                    </thead>
                    <tr>
                        <td>childUri</td>
                        <td>String</td>
                        <td></td>
                        <td>
                            URL or local file path to child data to be merged, having [[parent]].
                            If childUri is set, the uri will be used as an array of parent IDs
                            which should be appended to the childUri. For example:
                            <ul class="tablelist">
                                <li>
                                    <strong>uri</strong> http://my.docs.com/projects<br />
                                    Returns ["live", "staging", "beta"]
                                </li>
                                <li>
                                    <strong>childUri</strong> http://my.docs.com/[[parent]]<br />
                                    Will download:<br />
                                    http://my.docs.com/live<br />
                                    http://my.docs.com/staging<br />
                                    http://my.docs.com/beta
                                </li>
                                <li>
                                    Downloaded results will be merged.
                                </li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td>headers</td>
                        <td>Object or String</td>
                        <td></td>
                        <td>
                            Headers to be passed along HTTP requests (credentials, for example).<br />
                            If Object, the whole object will be send out.<br />
                            If String, it must be a path to a JSON file containing the headers object.
                        </td>
                    </tr>
                    <tr>
                        <td>updateKey</td>
                        <td>String</td>
                        <td>id</td>
                        <td>
                            The item property to be used to find items which needs to be updated
                            and not added to the database. For example sometimes an importer might
                            use "email" instead of "id" to find existing items.
                        </td>
                    </tr>
                </table>
                <h6>Creating your own custom importer</h6>
                <p>
                    If you wish to make a custom importer, for instance to get and transform data from a SQL database,
                    you'll need to create a xxxImporter.coffee file under the /server/importers/ directory.
                </p>
                <h6>Monitoring importer jobs</h6>
                <p>
                    You can see the current status of the ImporterManager by going to the
                    <strong>/importers/status</strong> path on your browser.
                </p>
            </section>
        </div>

        <div id="footer-wrapper"></div>
    </div>
</body>
</html>
