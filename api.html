<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Cube App, Import, manage and export collections of things. NodeJS + BackboneJS app ">
    <meta name="keywords" content="Data managemet, CubeApp, Cube App, Zalando, WebApp, Nodejs, Node, Backbone, Backbonejs, Solr, CRUD, data management tool">
    <meta name="author" content="Emanuel Lauria Izundegui">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <title>Cube – Import, manage and export collections of things.</title>
    <link rel="canonical" href="http://cubeapp.io">
    <link rel="icon" href="favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="template/templatescripts.js"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-40533395-3', 'cubeapp.io');
        ga('send', 'pageview');
    </script>
</head>

<body>
    <div id="wrapper">
        <div id="menu-wrapper"></div>

        <div id="page">

            <section id="api" class="inner">
            <h3>API Reference</h3>
            <p>The Cube provides a simple RESTful API. It offers common CRUD functionality like adding, updating or removing items from your collection.
            It also provides export functionality so that you can see your data in json, xml or csv formats. For more advanced queries than what this
            API is able to perform, you can always use Solr's API. Just to make things a bit more easy, here is a diagram of the architecture.
            </p>

            <img id="architecture" src="architecture.png">

            <h6>Entity Resources</h6>
            <div class="api_resource">
            <h4>GET /:entity/collection</h4>
            <p>Returns all or part of a collection of items from a given entity.</p>
            <p>Parameters:</p>
            <table>
                <tbody>
                    <tr><td>q</td><td>string, default is “*:*”</td></tr>
                    <tr><td>start</td><td>number, default is 0</td></tr>
                    <tr><td>rows</td><td>number, or value defined in entity settings or default is 50</td></tr>
                    <tr><td>sort</td><td>property:asc/desc. default is defined in entity settings</td></tr>
                    <tr><td>facet.field</td><td>specify a field to include in the faceted response</td></tr>
                    <tr><td>fs</td><td>facet filter. Limits the response to only documents matching this field. i.e:<br/>
                        &fs=team:Technology<br/>
                        &fs=startDate:new<br/>
                        &fs=startDate:[2013-01-01T00:00:00.0Z TO *]<br/>
                    </td></tr>
                </tbody>
            </table>
            <p>Response: JSON Object</p>
            </div>
            <div class="api_resource">
            <h4>GET /:entity/schema</h4>
            <p>Returns the schema of an entity</p>
            <p>Response: JSON Object</p>
            </div>
            <div class="api_resource">
            <h4>GET /:entity/settings</h4>
            <p>Returns the config settings of an entity</p>
            <p>Response: JSON Object</p>
            </div>
            <div class="api_resource">
            <h4>GET /:entity/pane.json</h4>
            <p>Returns the pane.json file of an entity. This file contains data used in a View that opens when a facet filter is selected. Check Team Cube example.</p>
            <p>Response: JSON Object</p>
            </div>
            <div class="api_resource">
            <h4>GET /:entity/ufacets</h4>
            <p>Returns a list of all available facets</p>
            <p>Response: JSON Object</p>
            </div>
            <div class="api_resource">
            <h4>GET /:entity/template</h4>
            <p>Returns all extension templates of an entity</p>
            <p>Response: HTML text</p>
            </div>
            <div class="api_resource">
            <h4>GET /:entity/calendar</h4>
            <p>Exports an iCal file containig one, a selection of, or all joined events for current user</p>
            <p>Parameters:</p>
            <table>
                <tbody>
                    <tr><td>selection</td><td>string of event IDs concatenated by a pipe '|'. i.e. &selection=id1|id2|id3</td></tr>
                </tbody>
            </table>
            <p>Response: iCal textfile</p>
            </div>
            <div class="api_resource">
            <h4>POST /:entity/picture</h4>
            <p>Allows a client to upload an image file. Used by the BackboneJs App when adding a new item.</p>
            <p>Response: JSON Object</p>
            </div>
            <h6>Item Resources</h6>
            <div class="api_resource">
            <h4>GET /:entity/collection/:id</h4>
            <p>Returns one item based on its ID</p>
            <p>Response: JSON Object</p>
            </div>
            <div class="api_resource">
            <h4>POST /:entity/collection/</h4>
            <p>Adds an item to the collection in Solr. The body of the request must not have an ID property. This will be generated automatically. Facet fields must be strings or comma separated strings. If a facet field is an array, then it won’t be formatted by the solr manager, allowing a client to make his own formatting. Only fields defined in Schema will be stored.<p>
            <p>Body: JSON Object to store</p>
            <p>Response: JSON Object</p>
            </div>
            <div class="api_resource">
            <h4>PUT /:entity/collection/id</h4>
            <p>Updates an existing item in Solr. The body of the request must contain all properties of the item. As when adding a new item, all facet fields must be strings or comma separated strings. Arrays won’t be formatted and only fields defined in Schema will be updated.</p>
            <p>When authentication is active, an entity is able to validate this request based on the user ID. In example, it can be configured that a user can not change the data of another user, since his user id doesn’t match the item id.</p>
            <p>body: JSON Object</p>
            <p>Response: JSON Object</p>
            </div>
            <div class="api_resource">
            <h4>DELETE /:entity/collection/:id</h4>
            <p>Removes an item from the DB.</p>
            <p>Response: JSON Object</p>
            </div>
            <div class="api_resource">
            <h4>PUT /:entity/:id/property/:property/:value</h4>
            <p>Modifies the value of a specific property for a given Item. If the field is multiple value (array, facet) the value is added. Otherwise the value is replaced by the one provided. i.e. when a user Joins a en event, her User ID is pushed in the subscription field of that event</p>
            <p>Response: JSON Object</p>
            </div>
            <div class="api_resource">
            <h4>DELETE /:entity/:id/property/:property/:value</h4>
            <p>Removes a value from a specific property of a given Item. If the field is multiple value then that value is extracted from the array. Otherwise the property is removed completely from the object. i.e. when a user leaves an event.</p>
            <p>Response: JSON Object</p>
            </div>
            </section>

        </div>

        <div id="footer-wrapper"></div>
    </div>
</body>
</html>
